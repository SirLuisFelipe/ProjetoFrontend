<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gerenciamento de usuários</title>
  <link rel="shortcut icon" href="../Assets/img/skatista.png" type="image/png">
  <link rel="stylesheet" href="../Assets/css/usuarios.css">
  <link rel="stylesheet" href="../Assets/css/modal.css">
  <link rel="stylesheet" href="../Assets/css/layout.css">
</head>
<body class="has-top-bar">
  <header class="app-top-bar">
    <div class="app-top-bar__left">
      <span class="app-top-bar__welcome js-welcome-user">Bem-vindo</span>
    </div>
  </header>
  <div class="usuarios-layout layout-with-topbar">
    <div class="sidebar">
      <button id="navReservations" class="sidebar-btn">Reservas</button>
      <button class="sidebar-btn active">Usuários</button>
      <button id="navDashboard" class="sidebar-btn">Dashboards</button>
      <button onclick="logout()">Sair</button>
    </div>
    <div class="main-content">
      <h2>Gerenciamento de usuários</h2>
      <div class="search-row">
        <input type="text" id="searchInput" placeholder="Pesquisar" class="search-bar">
        <button id="searchButton" type="button">Buscar</button>
        <button id="registerButton" type="button" onclick="openRegisterModal()">Novo usuário</button>
      </div>

      <div class="user-list"> </div>
    </div>
  </div>

<!-- Modal de edicao -->
  <div id="editModal" class="modal c-modal">
    <div class="modal-content c-modal__content">
      <span class="close c-modal__close" onclick="closeEditModal()">&times;</span>
      <h2 class="c-modal__title">Editar usuário</h2>
      <form id="editForm" class="c-modal__form">
        <input type="hidden" id="userId">

        <div class="form-group">
          <label for="name" class="c-modal__label">Nome:</label>
          <input type="text" id="name" class="c-modal__control" required>
        </div>

        <div class="form-group">
          <label for="cpf" class="c-modal__label">CPF:</label>
          <input type="text" id="cpf" class="c-modal__control" required>
        </div>

        <div class="form-group">
          <label for="email" class="c-modal__label">E-mail:</label>
          <input type="email" id="email" class="c-modal__control" required>
        </div>

        <div class="form-group">
          <label for="password" class="c-modal__label">Senha:</label>
          <input type="password" id="password" class="c-modal__control">
        </div>

        <div class="form-group">
          <label for="role" class="c-modal__label">Tipo de usuário:</label>
          <select id="editRoleSelect" class="c-modal__control">
            <option value="ADMIN">ADMIN</option>
            <option value="USER">User</option>
          </select>
        </div>

        <button type="submit" class="c-modal__button">Salvar</button>
      </form>
    </div>
  </div>

  <!-- Modal de Registro (reuso do modal da tela de login) -->
  <div id="registerModal" class="modal c-modal">
    <div class="modal-content c-modal__content">
      <span class="close c-modal__close" onclick="closeRegisterModal()">&times;</span>
      <h2 class="c-modal__title">Novo Usuário</h2>
      <form id="registerForm" class="c-modal__form">
        <div class="form-group">
          <label for="registerName" class="c-modal__label">Nome completo</label>
          <input type="text" id="registerName" class="c-modal__control" required>
        </div>

        <div class="form-group">
          <label for="registerCpf" class="c-modal__label">CPF</label>
          <input type="text" id="registerCpf" class="c-modal__control" required>
        </div>

        <div class="form-group">
          <label for="registerEmail" class="c-modal__label">E-mail</label>
          <input type="email" id="registerEmail" class="c-modal__control" required>
        </div>

        <div class="form-group">
          <label for="registerPassword" class="c-modal__label">Senha</label>
          <input type="password" id="registerPassword" class="c-modal__control" required>
        </div>

        <div class="form-group">
          <label for="role" class="c-modal__label">Tipo de usuário:</label>
          <select id="registerRoleSelect" class="c-modal__control">
            <option value="ADMIN">ADMIN</option>
            <option value="USER">User</option>
          </select>
        </div>

        <button type="submit" class="c-modal__button">Registrar</button>
      </form>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var buttons = document.querySelectorAll('.sidebar button');
      if (buttons.length > 0) {
        buttons[0].onclick = function() { window.location.href = '/pages/reserva.html'; };
      }
    });
  </script>
  <script src="../Assets/js/api-config.js"></script>
  <script src="../Assets/js/topbar.js"></script>
  <script src="../Assets/js/usuarios-helpers.js"></script>
  <script src="../Assets/js/usuarios.js"></script>
  <script src="../Assets/js/login.js"></script>
</body>
</html>


